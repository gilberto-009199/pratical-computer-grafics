<html>
 <head></head>
 <body>
   <script src="https://docs.opencv.org/3.4/opencv.js"></script>
  <div class="inputoutput">
   <img id="imageSrc" alt="No Image" />
   <div class="caption">
      imageSrc
      <input type="file" id="fileInput" name="file" />
   </div>
  </div>
  <canvas id="outputCanvas"></canvas>
  <script type="text/javascript">
    let imgElement = document.getElementById("imageSrc")
    let inputElement = document.getElementById("fileInput");
    inputElement.addEventListener("change", (e) => {
     imgElement.src = URL.createObjectURL(e.target.files[0]);
    }, false);
    imgElement.onload = function() {
     let mat = cv.imread(imgElement);
     
     let src = mat//cv.imread('canvasInput');
     let dst = new cv.Mat();
     // You can try more different parameters
     cv.threshold(src, dst, 177, 200, cv.THRESH_BINARY);
     cv.imshow("outputCanvas", dst);
     src.delete();
     dst.delete();
    }
  </script>
 </body>
</html>
